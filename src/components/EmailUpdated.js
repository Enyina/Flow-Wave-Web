import React, { useState, useEffect } from 'react';
import { useNavigate } from 'react-router-dom';
import { useAuth } from '../contexts/AuthContext';
import Logo from './Logo';
import BackButton from './BackButton';

const EmailUpdated = () => {
  const navigate = useNavigate();
  const { logout } = useAuth();
  const [hasAnimated, setHasAnimated] = useState(false);

  useEffect(() => {
    const timer = setTimeout(() => setHasAnimated(true), 100);
    return () => clearTimeout(timer);
  }, []);

  const handleLogout = () => {
    logout();
    navigate('/login');
  };

  const handleProceedToProfile = () => {
    navigate('/account');
  };

  return (
    <div className="min-h-screen bg-white dark:bg-dark-bg transition-colors duration-300">
      {/* Header */}
      <header className={`flex justify-between items-center px-4 lg:px-20 py-4 lg:py-6 ${hasAnimated ? 'animate-slide-in-down animate-once' : 'opacity-0'}`}>
        {/* Back Button and Logo */}
        <div className="flex items-center">
          <BackButton />
          <Logo className="ml-2" />
          <div className="text-black/80 dark:text-dark-text font-times text-lg lg:text-2xl font-bold ml-3 transition-colors duration-300">
            FLOWWAVE
          </div>
        </div>

        {/* Header Actions */}
        <div className="flex items-center gap-4 lg:gap-10">
          {/* Customer Service */}
          <button className="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-dark-surface transition-all duration-200">
            <svg width="40" height="40" viewBox="0 0 50 50" fill="none" className="w-8 h-8 lg:w-10 lg:h-10">
              <path d="M35.416 24.5924C35.416 23.8722 35.416 23.5122 35.5243 23.1913C35.8393 22.2588 36.6698 21.8972 37.5016 21.5182C38.4368 21.0922 38.9043 20.8793 39.3677 20.8418C39.8937 20.7992 40.4206 20.9126 40.8702 21.1649C41.4662 21.4993 41.8818 22.1349 42.3075 22.6518C44.2729 25.0388 45.2554 26.2326 45.615 27.5488C45.9052 28.6109 45.9052 29.7218 45.615 30.7838C45.0906 32.7036 43.4337 34.313 42.2073 35.8026C41.58 36.5645 41.2662 36.9455 40.8702 37.1678C40.4206 37.4201 39.8937 37.5334 39.3677 37.4909C38.9043 37.4534 38.4368 37.2405 37.5016 36.8145C36.6698 36.4355 35.8393 36.0738 35.5243 35.1413C35.416 34.8205 35.416 34.4605 35.416 33.7403V24.5924Z" stroke="#3A49A4" strokeWidth="3"/>
              <path d="M14.5827 24.5925C14.5827 23.6859 14.5572 22.8709 13.8242 22.2334C13.5575 22.0015 13.204 21.8404 12.4971 21.5184C11.5619 21.0925 11.0943 20.8796 10.6309 20.8421C9.24083 20.7296 8.49293 21.6784 7.69129 22.6521C5.72591 25.0392 4.74322 26.2327 4.38364 27.549C4.09347 28.6113 4.09347 29.7221 4.38364 30.7842C4.9081 32.704 6.56502 34.3132 7.79145 35.8029C8.56454 36.7419 9.30304 37.5986 10.6309 37.4913C11.0943 37.4538 11.5619 37.2407 12.4971 36.8148C13.204 36.4927 13.5575 36.3317 13.8242 36.0998C14.5572 35.4623 14.5827 34.6475 14.5827 33.7407V24.5925Z" stroke="#3A49A4" strokeWidth="3"/>
              <path d="M41.6673 21.8753V18.7503C41.6673 10.6962 34.2054 4.16699 25.0007 4.16699C15.7959 4.16699 8.33398 10.6962 8.33398 18.7503V21.8753" stroke="#3A49A4" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round"/>
              <path d="M41.6667 36.458C41.6667 45.833 33.3333 45.833 25 45.833" stroke="#3A49A4" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round"/>
            </svg>
          </button>

          {/* Notifications */}
          <button 
            onClick={() => navigate('/notifications')}
            className="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-dark-surface transition-all duration-200"
          >
            <svg width="40" height="40" viewBox="0 0 50 50" fill="none" className="w-8 h-8 lg:w-10 lg:h-10">
              <path d="M32.2923 37.5C32.2923 41.5271 29.0277 44.7917 25.0007 44.7917C20.9736 44.7917 17.709 41.5271 17.709 37.5" stroke="#3A49A4" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round"/>
              <path d="M40.0648 37.4997H9.93515C7.8999 37.4997 6.25 35.8497 6.25 33.8145C6.25 32.8372 6.63825 31.8999 7.32935 31.2086L8.58608 29.952C9.75819 28.7799 10.4167 27.1901 10.4167 25.5326V19.7913C10.4167 11.7372 16.9459 5.20801 25 5.20801C33.0542 5.20801 39.5833 11.7372 39.5833 19.7913V25.5326C39.5833 27.1901 40.2419 28.7799 41.414 29.952L42.6706 31.2086C43.3617 31.8999 43.75 32.8372 43.75 33.8145C43.75 35.8497 42.1 37.4997 40.0648 37.4997Z" stroke="#3A49A4" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round"/>
            </svg>
          </button>

          {/* Logout Button */}
          <button
            onClick={handleLogout}
            className="px-4 py-2 lg:px-6 lg:py-3 border-2 border-primary-blue text-primary-blue rounded-lg font-bold text-sm lg:text-lg hover:bg-primary-blue hover:text-white transition-all duration-300"
          >
            Log Out
          </button>
        </div>
      </header>

      {/* Main Content */}
      <main className="flex flex-col items-center px-4 lg:px-0 pb-32">
        <div className={`w-full max-w-lg ${hasAnimated ? 'animate-fade-in-up animate-once' : 'opacity-0'}`} style={{ animationDelay: '0.2s' }}>
          
          {/* Success Content */}
          <div className="flex flex-col items-center gap-10">
            
            {/* Success Icon */}
            <div className="w-32 h-28">
              <svg width="150" height="135" viewBox="0 0 150 135" fill="none" className="w-full h-full">
                <g clipPath="url(#clip0_1351_3296)">
                  <path d="M148.683 51.6267C148.63 51.6268 148.577 51.6103 148.533 51.5794L75.7544 0.763046C75.5329 0.609122 75.2697 0.526862 75.0002 0.527323C74.7307 0.527784 74.4678 0.610942 74.2469 0.765622L1.99248 51.5789C1.93533 51.6191 1.8646 51.6349 1.79584 51.6228C1.72708 51.6107 1.66593 51.5717 1.62585 51.5144C1.58576 51.4571 1.57002 51.3862 1.58209 51.3173C1.59416 51.2483 1.63304 51.187 1.69019 51.1468L73.9447 0.333534C74.254 0.117014 74.6221 0.000624144 74.9994 2.5032e-06C75.3767 -0.000619138 75.7451 0.114556 76.0552 0.330055L148.834 51.1463C148.88 51.1784 148.914 51.2244 148.932 51.2776C148.951 51.3308 148.951 51.3884 148.934 51.442C148.918 51.4956 148.884 51.5424 148.839 51.5756C148.794 51.6088 148.739 51.6268 148.683 51.6267Z" fill="#3F3D56"/>
                  <path d="M6.12305 53.4284L75.0736 2.19531L144.547 57.0739L78.6262 96.2541L42.8367 88.0751L6.12305 53.4284Z" fill="#E6E6E6"/>
                  <path d="M45.8559 120.453H11.7927C11.5835 120.453 11.3764 120.412 11.183 120.332C10.9897 120.252 10.8141 120.134 10.6661 119.986C10.5181 119.838 10.4007 119.662 10.3206 119.468C10.2405 119.275 10.1992 119.067 10.1992 118.857C10.1992 118.648 10.2405 118.44 10.3206 118.246C10.4007 118.052 10.5181 117.877 10.6661 117.728C10.8141 117.58 10.9897 117.463 11.183 117.383C11.3764 117.303 11.5835 117.261 11.7927 117.262H45.8559C46.0651 117.261 46.2722 117.303 46.4655 117.383C46.6589 117.463 46.8345 117.58 46.9825 117.728C47.1305 117.877 47.2479 118.052 47.328 118.246C47.4081 118.44 47.4494 118.648 47.4494 118.857C47.4494 119.067 47.4081 119.275 47.328 119.468C47.2479 119.662 47.1305 119.838 46.9825 119.986C46.8345 120.134 46.6589 120.252 46.4655 120.332C46.2722 120.412 46.0651 120.453 45.8559 120.453Z" fill="#6C63FF"/>
                  <path d="M24.0138 113.593H11.7927C11.5835 113.594 11.3764 113.553 11.183 113.473C10.9897 113.392 10.8141 113.275 10.6661 113.127C10.5181 112.979 10.4007 112.803 10.3206 112.609C10.2405 112.415 10.1992 112.208 10.1992 111.998C10.1992 111.788 10.2405 111.581 10.3206 111.387C10.4007 111.193 10.5181 111.017 10.6661 110.869C10.8141 110.721 10.9897 110.603 11.183 110.523C11.3764 110.443 11.5835 110.402 11.7927 110.402H24.0138C24.223 110.402 24.4301 110.443 24.6234 110.523C24.8168 110.603 24.9924 110.721 25.1404 110.869C25.2884 111.017 25.4058 111.193 25.4859 111.387C25.566 111.581 25.6073 111.788 25.6073 111.998C25.6073 112.208 25.566 112.415 25.4859 112.609C25.4058 112.803 25.2884 112.979 25.1404 113.127C24.9924 113.275 24.8168 113.392 24.6234 113.473C24.4301 113.553 24.223 113.594 24.0138 113.593Z" fill="#ED59C0"/>
                  <path d="M76.0426 81.9646C75.7837 81.9649 75.5272 81.9145 75.2876 81.8163L32.7637 64.1262V8.75313C32.7642 8.26348 32.9585 7.79405 33.3038 7.44782C33.6492 7.10159 34.1174 6.90682 34.6058 6.90625H116.185C116.673 6.90682 117.141 7.10159 117.487 7.44782C117.832 7.79405 118.026 8.26348 118.027 8.75313V64.1648L117.947 64.1991L76.8205 81.8077C76.5742 81.9114 76.3097 81.9648 76.0426 81.9646Z" fill="white"/>
                  <path d="M76.0414 82.0955C75.7653 82.0958 75.4918 82.0421 75.2362 81.9375L32.6309 64.2134V8.75223C32.6315 8.22761 32.8396 7.72464 33.2096 7.35367C33.5796 6.9827 34.0813 6.77403 34.6045 6.77344H116.183C116.707 6.77403 117.208 6.9827 117.578 7.35367C117.948 7.72464 118.157 8.22761 118.157 8.75223V64.251L76.8709 81.928C76.6083 82.0388 76.3263 82.0957 76.0414 82.0955ZM33.1572 63.8609L75.4369 81.4497C75.8313 81.6101 76.2729 81.6074 76.6653 81.4423L117.631 63.9027V8.75223C117.63 8.36751 117.478 7.99868 117.206 7.72664C116.935 7.4546 116.567 7.30157 116.184 7.30112H34.6046C34.2208 7.30157 33.8529 7.4546 33.5816 7.72664C33.3103 7.99868 33.1576 8.36751 33.1572 8.75223L33.1572 63.8609Z" fill="#3F3D56"/>
                  <path d="M148.158 51.0996H148.105L117.895 64.033L76.5606 81.7287C76.3991 81.7969 76.2257 81.8324 76.0505 81.8333C75.8753 81.8342 75.7016 81.8005 75.5394 81.734L32.8947 63.9961L1.94207 51.1207L1.89479 51.0996H1.84211C1.35371 51.1002 0.885481 51.2949 0.540137 51.6411C0.194793 51.9874 0.000541908 52.4568 0 52.9465V133.154C0.000542603 133.643 0.194793 134.113 0.540137 134.459C0.885481 134.805 1.35372 135 1.84211 135.001H148.158C148.646 135 149.115 134.805 149.46 134.459C149.805 134.113 149.999 133.643 150 133.154V52.9465C149.999 52.4568 149.805 51.9874 149.46 51.6411C149.115 51.2949 148.646 51.1002 148.158 51.0996ZM149.474 133.154C149.474 133.504 149.335 133.839 149.088 134.086C148.841 134.334 148.507 134.473 148.158 134.473H1.84211C1.49318 134.473 1.15859 134.334 0.911857 134.086C0.665129 133.839 0.526455 133.504 0.526316 133.154V52.9465C0.526793 52.6053 0.658779 52.2776 0.894679 52.0317C1.13058 51.7859 1.45213 51.641 1.79212 51.6273L32.8947 64.566L75.3369 82.2221C75.7963 82.4095 76.3111 82.4067 76.7685 82.2142L117.895 64.6055L148.211 51.6273C148.55 51.642 148.871 51.7873 149.106 52.033C149.341 52.2787 149.473 52.6059 149.474 52.9465V133.154Z" fill="#3F3D56"/>
                  <path d="M75.6176 66.2625C74.0477 66.2654 72.5195 65.7565 71.2634 64.8124L71.1855 64.7538L54.7879 52.1667C54.0285 51.5833 53.3911 50.8557 52.9122 50.0254C52.4333 49.195 52.1221 48.2783 51.9966 47.3274C51.871 46.3765 51.9335 45.4102 52.1805 44.4835C52.4275 43.5568 52.854 42.688 53.4359 41.9266C54.0178 41.1653 54.7435 40.5263 55.5717 40.0461C56.3999 39.5659 57.3143 39.254 58.2627 39.1281C59.2111 39.0022 60.175 39.0649 61.0992 39.3125C62.0235 39.5601 62.8901 39.9878 63.6495 40.5711L74.2706 48.7364L99.3701 15.9183C99.9522 15.1571 100.678 14.5183 101.507 14.0384C102.335 13.5585 103.249 13.2469 104.198 13.1214C105.146 12.9959 106.11 13.0589 107.034 13.3068C107.958 13.5548 108.825 13.9828 109.584 14.5665L109.428 14.7789L109.588 14.5696C111.12 15.7496 112.122 17.4905 112.374 19.4103C112.627 21.3301 112.11 23.2721 110.936 24.8101L81.4135 63.4121C80.7307 64.3016 79.8526 65.0214 78.8475 65.5158C77.8423 66.0101 76.7371 66.2656 75.6176 66.2625Z" fill="#6C63FF"/>
                </g>
                <defs>
                  <clipPath id="clip0_1351_3296">
                    <rect width="150" height="135" fill="white"/>
                  </clipPath>
                </defs>
              </svg>
            </div>

            {/* Success Message */}
            <div className="flex flex-col items-center gap-4">
              <h2 className="text-black text-2xl font-bold text-center">
                Your email address has been updated
              </h2>
              <p className="text-black text-base text-center">
                Olumide, you have successfully updated your email address
              </p>
            </div>

            {/* Continue Button */}
            <button
              onClick={handleProceedToProfile}
              className="w-full py-3 bg-primary-blue text-white text-lg font-bold rounded-lg hover:bg-primary-blue/90 transition-all duration-300"
            >
              Continue
            </button>
          </div>
        </div>
      </main>

      {/* Bottom Navigation */}
      <nav className={`fixed bottom-0 left-0 right-0 bg-white dark:bg-dark-surface shadow-soft dark:shadow-dark-soft px-6 py-6 ${hasAnimated ? 'animate-slide-in-up animate-once' : 'opacity-0'}`} style={{ animationDelay: '1.2s' }}>
        <div className="flex justify-between items-center max-w-2xl mx-auto">
          <button onClick={() => navigate('/dashboard')} className="flex flex-col items-center gap-1 text-neutral-gray">
            <svg width="50" height="50" viewBox="0 0 50 50" fill="none" className="w-10 h-10">
              <path d="M6.25 24.978V30.208C6.25 37.0826 6.25 40.5199 8.38569 42.6557C10.5214 44.7913 13.9587 44.7913 20.8333 44.7913H29.1667C36.0412 44.7913 39.4785 44.7913 41.6144 42.6557C43.75 40.5199 43.75 37.0826 43.75 30.208V24.978C43.75 21.4753 43.75 19.7241 43.0085 18.2081C42.2671 16.6921 40.8848 15.6169 38.12 13.4666L33.9533 10.2258C29.6523 6.88061 27.5019 5.20801 25 5.20801C22.4981 5.20801 20.3477 6.88061 16.0467 10.2258L11.88 13.4666C9.11527 15.6169 7.7329 16.6921 6.99146 18.2081C6.25 19.7241 6.25 21.4753 6.25 24.978Z" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round"/>
              <path d="M31.25 35.417C29.5844 36.7137 27.3963 37.5003 25 37.5003C22.6036 37.5003 20.4157 36.7137 18.75 35.417" stroke="currentColor" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round"/>
            </svg>
            <span className="text-xs font-medium">Home</span>
          </button>

          <button onClick={() => navigate('/transactions')} className="flex flex-col items-center gap-1 text-neutral-gray">
            <svg width="50" height="50" viewBox="0 0 50 50" fill="none" className="w-10 h-10">
              <path d="M34.1418 6.25L36.2312 8.28279C37.1646 9.19094 37.6312 9.64502 37.4668 10.0309C37.3027 10.4167 36.6427 10.4167 35.3227 10.4167H19.154C10.8763 10.4167 4.16602 16.9459 4.16602 25C4.16602 28.0983 5.1591 30.9713 6.85247 33.3333" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round"/>
              <path d="M15.8574 43.7503L13.7682 41.7176C12.8349 40.8093 12.3682 40.3553 12.5324 39.9695C12.6967 39.5837 13.3567 39.5837 14.6766 39.5837H30.8454C39.1229 39.5837 45.8333 33.0545 45.8333 25.0003C45.8333 21.902 44.8402 19.0291 43.1469 16.667" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round"/>
            </svg>
            <span className="text-xs font-medium">Transactions</span>
          </button>

          <button onClick={() => navigate('/recipients')} className="flex flex-col items-center gap-1 text-neutral-gray">
            <svg width="51" height="50" viewBox="0 0 51 50" fill="none" className="w-10 h-10">
              <path d="M25.3375 9.97926C35.2839 6.58844 40.2571 4.89305 42.9321 7.56794C45.6069 10.2428 43.9114 15.2161 40.5208 25.1625L38.2117 31.9358C35.6077 39.5746 34.3056 43.394 32.1592 43.71C31.5823 43.795 30.985 43.744 30.4139 43.5606C28.2906 42.879 27.1681 38.8519 24.9231 30.7979C24.4252 29.0115 24.1762 28.1181 23.6092 27.4358C23.4446 27.2379 23.2621 27.0554 23.0642 26.8908C22.3819 26.3238 21.4885 26.0748 19.7022 25.5769C11.6481 23.3319 7.62112 22.2094 6.93937 20.086C6.75608 19.5151 6.70493 18.9178 6.78991 18.3407C7.10599 16.1944 10.9254 14.8924 18.5642 12.2883L25.3375 9.97926Z" stroke="currentColor" strokeWidth="3"/>
            </svg>
            <span className="text-xs font-medium">Recipients</span>
          </button>

          <button onClick={() => navigate('/account')} className="flex flex-col items-center gap-1 text-primary-blue">
            <svg width="51" height="50" viewBox="0 0 51 50" fill="none" className="w-10 h-10">
              <path d="M35.9173 17.7087C35.9173 11.9557 31.2536 7.29199 25.5007 7.29199C19.7477 7.29199 15.084 11.9557 15.084 17.7087C15.084 23.4616 19.7477 28.1253 25.5007 28.1253C31.2536 28.1253 35.9173 23.4616 35.9173 17.7087Z" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round"/>
              <path d="M40.0827 42.7083C40.0827 34.6542 33.5535 28.125 25.4993 28.125C17.4452 28.125 10.916 34.6542 10.916 42.7083" stroke="currentColor" strokeWidth="3" strokeLinecap="round" strokeLinejoin="round"/>
            </svg>
            <span className="text-xs font-medium">Profile</span>
          </button>
        </div>
      </nav>
    </div>
  );
};

export default EmailUpdated;
